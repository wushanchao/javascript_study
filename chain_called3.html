<!DOCTYPE html>
<html>
<head>
    <meta charset="utf8" />
<title>链式调用3</title>
<script type="text/javascript">
//第一版本的不同写法而已，代码可能好看了一丁点，但是效率还是第一版本高
Array.prototype.wsc = function(func){  
    var original_arry_len = this.length ,original_arry = this, Arg = arguments,Arg_length = arguments.length,return_array = [],func_positon= Arg[0] || 0,real_func = Arg[func_positon];

    if(Arg_length == 1){
        for(var i=0; i<original_arry_len; i++){
            return_array[i] = func(original_arry[i]);
        }
    }
    else if(Arg_length == 3){
        for(var i=0; i<original_arry_len; i++){
            if(func_positon == 1){
                return_array[i] = real_func(original_arry[i],Arg[2]);
            }
            else if(func_positon == 2){
                return_array[i] = real_func(Arg[1],original_arry[i]);
            }
        }
    }
    else if(Arg_length == 4){
        for(var i=0; i<original_arry_len; i++){
            if(func_positon == 1){
                return_array[i] = real_func(original_arry[i],Arg[2],Arg[3]);
            }
            else if(func_positon == 2){
                return_array[i] = real_func(Arg[1],original_arry[i],Arg[3]);
            }
            else if(func_positon == 3){
                return_array[i] = real_func(Arg[1],Arg[2],original_arry[i]);
            }
        }
    }
    
     
    return return_array;  
}

  
function double(x){  
    return x * 2;  
}


function inc(x,y){ 
    return x + y;
}

function ind(x,y,z){
    return x + y + z;
}
   

   
// var numTemp = [1, 2, 3].wsc(double).wsc(double).wsc(double);
var numTemp = [1, 2, 3].wsc(2,3,inc);//函数第一个参数是指调用函数的位置，这里的2表示，调用函数位置在第二位，于是调用函数跟调用函数的第二个参数，调换了位置。
// var numTemp = [1, 2, 3].wsc(2,5,ind,3);
console.log(numTemp);
</script>
</head>
<body></body>
</html>